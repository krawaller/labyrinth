<!DOCTYPE html>
<html>
<head>
	<title>Labyrinth demo</title>
   	<script src="../js/jquery-1.4.2.js" type="text/javascript"></script>
	<script src="../js/analyser.js" type="text/javascript"></script>
   	<script src="../js/player.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="../graphics/lab.css" />
</head>
<body>
<div id="main"></div>
    <script type="text/javascript">
var lvl = {
	title: "testlevel",
	rows: 13,
	cols: 13,
	borders: ["s3_12","e10_4","e12_7"],
    squares: {
		"12_12": "goal",
        "10_12": "gate",
        "12_11": "gate",
        "5_1": "wall",
        "5_4": "sand",
        "5_2": "money",
        "7_3": "ice2",
        "3_7": "bigmoney",
        "3_12": "bigmoney",
        "10_10": "key"
	},
	entities: [{
		type: "plr",
		x: 7,
		y: 7
	}],
	types: {
		"plr": {
			move: "grav"
		}
	},
    squarecollisions: {
        "plr-wall":{
            stop: true
        },
        "plr-sand":{
            stop: true,
            on: true
        },
        "plr-money":{
            on: true,
            setwalltype: "none"
        },
        "plr-bigmoney":{
            on: true,
            stop: true,
            setwalltype: "none"
        },
        "plr-ice2":{
            stop: true,
            setwalltype: "ice1"
        },
        "plr-ice1":{
            stop: true,
            setwalltype: "none"
        },
        "plr-key":{
            setwalltype: "none",
            setflag: "haskey",
            on: true
        },
        "plr-gate":{
            cond: {
                conds: {
                    "hasflag": "haskey"
                },
                iftrue: {
                    on: true,
                    stop: true,
                    setwalltype: "none"
                },
                iffalse: {
                    stop:true
                }
            }
        }
    }
};
var lvl2 = {
	title: "testlevel",
	rows: 6,
	cols: 8,
	borders: ["s6_1","e1_2","e1_4","e1_5","s2_5","e5_5","e7_4","s7_5"],
    squares: {
		"7_2": "goal",
        "6_2": "gate",
        "5_1": "wall",
        "5_4": "sand",
        "2_2": "money",
        "2_3": "ice2",
        "3_5": "bigmoney",
        "6_5": "key",
        "4_2": "tele",
        "3_4": "tele2"
	},
	entities: [{
		type: "plr",
		x: 2,
		y: 4
	}],
	types: {
		"plr": {
			move: "grav"
		}
	},
    squarecollisions: {
        "plr-tele":{
            tele: {x:3,y:4},
            on: true
        },
        "plr-tele2":{
            tele: {x:4,y:2},
            on: true
        },
        "plr-wall":{
            stop: true
        },
        "plr-sand":{
            stop: true,
            on: true
        },
        "plr-money":{
            on: true,
            setwalltype: "none"
        },
        "plr-bigmoney":{
            on: true,
            stop: true,
            setwalltype: "none"
        },
        "plr-ice2":{
            stop: true,
            setwalltype: "ice1"
        },
        "plr-ice1":{
            stop: true,
            setwalltype: "none"
        },
        "plr-key":{
            setwalltype: "none",
            setflag: "haskey",
            on: true
        },
        "plr-gate":{
            cond: {
                conds: {
                    "hasflag": "haskey"
                },
                iftrue: {
                    on: true,
                    stop: true,
                    setwalltype: "none"
                },
                iffalse: {
                    stop:true
                }
            }
        }
    }
};
lab.playLevel(lvl2,"main");
</script>
</body>
</html>